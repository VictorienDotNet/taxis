{"version":3,"sources":["components/Call/Call.module.scss","components/Softkey/Softkey.module.css","components/Ads/Button.module.css","components/Button/Button.module.scss","components/Map/images/target.svg","components/Softkey/Softkey.js","tools/getCurrentPosition.js","components/Map/Map.js","components/Map/images/marker.svg","components/Map/Markers.js","components/Ads/Button.js","tools/geometry.js","components/Card/Card.js","tools/openSettings.js","components/Onboarding/LocationDisabled.svg","tools/analytics.js","hooks/useNavigation.js","hooks/useStorage.js","components/Onboarding/sign.svg","components/Onboarding/GetPositionButton.js","components/Onboarding/Earth.js","components/Onboarding/Onboarding.js","components/Results/Results.js","tools/fetch.js","components/Call/icon-review-positive-answer.svg","components/Call/icon-calling.js","components/Call/icon-review-negative-answer.svg","components/Call/icon-review-question.svg","components/Call/Call.js","App.js","hooks/usePrevious.js","index.js","components/Onboarding/Onboarding.module.scss","components/Map/Map.module.css","components/Card/Card.module.css"],"names":["module","exports","_g","_g2","_g3","_g4","Softkey","children","useEffect","handleKeyDown","evt","key","max","length","center","left","right","fct","document","addEventListener","removeEventListener","className","css","softkey","map","child","i","onClick","name","normalizeCoords","input","source","lat","lng","output","latitude","longitude","_excluded","_extends","Object","assign","bind","target","arguments","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgTarget","_ref","svgRef","title","titleId","props","xmlns","xmlnsXlink","width","height","ref","id","d","xlinkHref","fill","clipPath","strokeWidth","stroke","ForwardRef","Map","React","forwardRef","keyboard","to","useState","bounds","setBounds","A","lgt","B","forEach","position","C","D","L","latLngBounds","latLng","Container","Target","MapContainer","keyboardPanDelta","TileLayer","url","Set","Softkeys","useMap","current","onKeyDown","zoomOut","zoomIn","panBy","animate","coords","getCenter","preventDefault","fitBounds","padding","invalidateSize","MyPosition","settings","divIcon","iconSize","Point","here","Marker","icon","Rank","Icon","iconUrl","img","iconAnchor","popupAnchor","shadowUrl","shadowSize","shadowAnchor","AdsButton","state","setState","window","getKaiAd","publisher","app","onerror","err","console","error","onready","ad","timeout","setTimeout","clearTimeout","button","deg2rad","deg","Math","PI","Card","data","action","ranks","index","item","type","subheader","vicinity","dist","lon1","lat1","lon2","lat2","dLat","dLon","a","sin","cos","atan2","sqrt","round","getDistance","Dots","dots","push","pagging","rank","Phone","service","Wrapper","_path","openSettings","MozActivity","activity","section","onsuccess","hit","properties","amplitude","getInstance","init","process","logEvent","version","useNavigation","setNavigation","setCurrent","getAllElements","querySelectorAll","selectElement","body","setIndex","allElements","currentIndex","element","querySelector","parseInt","getAttribute","getTheIndexOfTheSelectedElement","goToFirstElement","click","selectThisElement","setAttribute","focus","blur","tagName","dev","clear","set","location","reload","get","then","log","SvgLocationDisabled","viewBox","GetPositionButton","Earth","SolarSystem","SvgSign","fillRule","transform","x","y","fillOpacity","rx","points","Onboarding","onboarding","success","denied","failcount","IDWatch","navigator","geolocation","watchPosition","stop","code","PERMISSION_DENIED","enableHighAccuracy","maximumAge","clearWatch","getCurrentPosition","res","disabled","Results","onCompleted","onError","src","fetch","json","request","results","result","isMap","isRanks","phone","softactions","Graphic","SvgIconReviewPositiveAnswer","strokeLinecap","_path2","_path3","SvgIconReviewNegativeAnswer","SvgIconReviewQuestion","Call","close","main","App","datasets","setDatasets","createdAt","compare","update","open","install","catch","newDatasets","Date","now","uuidv4","metadata","newData","useStorage","previousData","value","useRef","usePrevious","b","quantity","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.07222a4f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Call_main__37YNI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"softkey\":\"Softkey_softkey__1151L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2wrSg\",\"appear\":\"Button_appear__3YHdP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Button_main__1J5zf\"};","var _g, _g2, _g3, _g4;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTarget(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 9 3 C 9 1.343 10.343 0 12 0 L 12 0 C 13.657 0 15 1.343 15 3 L 15 9 C 15 10.657 13.657 12 12 12 L 12 12 C 10.343 12 9 10.657 9 9 Z\",\n    id: \"a1000z\"\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"a1001z\"\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#a1000z\"\n  }))), /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#a1000z\",\n    fill: \"#005AE0\",\n    clipPath: \"url(#a1001z)\",\n    strokeWidth: 4,\n    stroke: \"hsl(0, 0%, 100%)\"\n  }))), _g2 || (_g2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 9 15 C 9 13.343 10.343 12 12 12 L 12 12 C 13.657 12 15 13.343 15 15 L 15 21 C 15 22.657 13.657 24 12 24 L 12 24 C 10.343 24 9 22.657 9 21 Z\",\n    id: \"a1002z\"\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"a1003z\"\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#a1002z\"\n  }))), /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#a1002z\",\n    fill: \"#005AE0\",\n    clipPath: \"url(#a1003z)\",\n    strokeWidth: 4,\n    stroke: \"hsl(0, 0%, 100%)\"\n  }))), _g3 || (_g3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 0 12 C 0 10.343 1.343 9 3 9 L 9 9 C 10.657 9 12 10.343 12 12 L 12 12 C 12 13.657 10.657 15 9 15 L 3 15 C 1.343 15 0 13.657 0 12 Z\",\n    id: \"a1004z\"\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"a1005z\"\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#a1004z\"\n  }))), /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#a1004z\",\n    fill: \"#005AE0\",\n    clipPath: \"url(#a1005z)\",\n    strokeWidth: 4,\n    stroke: \"hsl(0, 0%, 100%)\"\n  }))), _g4 || (_g4 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 12 12 C 12 10.343 13.343 9 15 9 L 21 9 C 22.657 9 24 10.343 24 12 L 24 12 C 24 13.657 22.657 15 21 15 L 15 15 C 13.343 15 12 13.657 12 12 Z\",\n    id: \"a1006z\"\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"a1007z\"\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#a1006z\"\n  }))), /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#a1006z\",\n    fill: \"#005AE0\",\n    clipPath: \"url(#a1007z)\",\n    strokeWidth: 4,\n    stroke: \"hsl(0, 0%, 100%)\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTarget);\nexport default __webpack_public_path__ + \"static/media/target.7390b2ad.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect } from \"react\";\nimport css from \"./Softkey.module.css\";\n\nexport const Softkey = ({ children }) => {\n\t/* DEFINE THE KEYDOWN EVENT */\n\t//UseEffect is use to define the keydown event depending on children\n\tuseEffect(() => {\n\t\tconst handleKeyDown = (evt) => {\n\t\t\t/* BLOCK USELESS KEYDOWN */\n\t\t\tif (\n\t\t\t\tevt.key !== \"Enter\" &&\n\t\t\t\tevt.key !== \"SoftRight\" &&\n\t\t\t\tevt.key !== \"SoftLeft\"\n\t\t\t)\n\t\t\t\treturn;\n\n\t\t\tif (!children) return;\n\n\t\t\t/* GET ACTION INDEX */\n\t\t\t//Define the left, center and right action depending on the number of children\n\t\t\tlet max = children.length;\n\t\t\tlet center = max === 1 ? \"0\" : max === 3 ? 1 : false;\n\t\t\tlet left = max === 2 || max === 3 ? \"0\" : false;\n\t\t\tlet right = max === 2 || max === 3 ? max - 1 : false;\n\n\t\t\t/* TRIGGER ACTION */\n\t\t\t// Depending on the key we trigger the action\n\n\t\t\tif (evt.key === \"SoftLeft\" && left) {\n\t\t\t\t//Softleft is triggered\n\t\t\t\ttypeof children[left].fct === \"function\" && children[left].fct();\n\t\t\t} else if (evt.key === \"Enter\" && center) {\n\t\t\t\t//Enter is triggered\n\t\t\t\ttypeof children[center].fct === \"function\" && children[center].fct();\n\t\t\t} else if (evt.key === \"SoftRight\" && right) {\n\t\t\t\t//Softright is triggered\n\t\t\t\ttypeof children[right].fct === \"function\" && children[right].fct();\n\t\t\t}\n\t\t};\n\n\t\t/* SETUP THE EVENT LISTERNER */\n\t\t//Mount the event\n\t\tdocument.addEventListener(\"keydown\", handleKeyDown);\n\t\t//Unmount the event\n\t\treturn () => document.removeEventListener(\"keydown\", handleKeyDown);\n\t}, [children]);\n\n\treturn (\n\t\t<div className={css.softkey}>\n\t\t\t{children &&\n\t\t\t\tchildren.map((child, i) => {\n\t\t\t\t\tlet onClick = () => typeof child.fct === \"function\" && child.fct();\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<span key={i} onClick={onClick}>\n\t\t\t\t\t\t\t{child.name}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t</div>\n\t);\n};\n","export const getCurrentPosition = (success, denied, error) => {\n  //We will store the amount of fail into failcount,\n  //We will use later to determinate when to give up.\n  let failcount = 0;\n  const IDWatch = navigator.geolocation.watchPosition(\n    function (position) {\n      // IF IT'S A SUCCESS\n      //We callback the function related to success\n      success(position);\n      //We Stop to watch the position\n      stop();\n    },\n    function (err) {\n      // IF IT'S A FAIL\n      //We don't give up after only one fail,\n      //We continue until couple of fails or if the user denied\n      failcount++;\n\n      if (err.code === err.PERMISSION_DENIED) {\n        stop();\n        denied(err);\n      } else if (failcount > 6) {\n        stop();\n        error(err);\n      }\n    },\n    {\n      //We setup a Timeout in case of an unfinishable retrieving\n      enableHighAccuracy: true,\n      timeout: 2500,\n      maximumAge: 7 * 24 * 60 * 60 * 1000 // 7 days in millisecond\n    }\n  );\n  // Will Stop the Watch once the job is done\n  const stop = () => {\n    navigator.geolocation.clearWatch(IDWatch);\n  };\n};\n\n/** NORMALIZATION OF COORDS\n * The Coords object is structured differentiel accross services. Leaflet use an array, Google Maps prefer a latitude and longitude as properties. This function format an initial coords into an object usable in every services.\n */\nexport const normalizeCoords = (input, source) => {\n  let lat, lng, output;\n\n  //console.log(input);\n  //First, we get the properties we are interesd in from the initial object\n  lat = input.latitude || input.lat || input[0] || 0;\n  lng = input.longitude || input.lng || input[1] || 0;\n\n  //console.log(lat, lng);\n\n  //Secondly, we create new array with latitude on index 0 and longitude and index 1\n  output = [lat, lng];\n\n  //Thirdly, we set back the properties\n  output.latitude = lat;\n  output.lat = lat;\n  output.longitude = lng;\n  output.lng = lng;\n  output.source = source;\n\n  //We return the final object\n  return output;\n};\n","import React, { useEffect, useState } from \"react\";\nimport L from \"leaflet\";\nimport { MapContainer, TileLayer, useMap } from \"react-leaflet\";\nimport { normalizeCoords } from \"../../tools/getCurrentPosition\";\nimport css from \"./Map.module.css\";\nimport { ReactComponent as Target } from \"./images/target.svg\";\nimport \"./Leaflet.1.7.1.css\";\n\n//export function Map({ center, children, zoom }) {\nexport const Map = React.forwardRef((props, ref) => {\n\tconst { center = [0, 0], children, keyboard = true, to } = props;\n\t/* SETUP REF */\n\t// This ref is use to update map parameters */\n\n\t/* DEFINE THE BOUNDS */\n\tlet [bounds, setBounds] = useState([]);\n\n\t/* We will define the higest and lowest bound's lattitudes and longitudes. By definition, latitude go from Nord to South with a scale of 90 to -90 and longitude go from West to Est with a scale of -180 to 180. If `A` is the Nord-Ouest corner, A.lgt should be the lowest value and A.lat should be the highest value. If `B` is the South-East corner, B.lgt should be the higgest value and B.lat should be the lowest value. */\n\t//N.B.: I could do it more simple https://stackoverflow.com/questions/27451152/fitbounds-of-markers-with-leaflet\n\n\tuseEffect(() => {\n\t\t// A and B are respectively the Nord-Ouest and South-East corner.\n\t\tconst A = { lat: null, lgt: null };\n\t\tconst B = { lat: null, lgt: null };\n\n\t\t// We will compare coords children\n\n\t\tif (children) {\n\t\t\tchildren.forEach((child) => {\n\t\t\t\tif (child && child.props.position) {\n\t\t\t\t\t// Marker should have a position property where the firs value of the array is the latitude and the second value of the array is the longitutde.\n\t\t\t\t\tlet C = child.props.position[0]; //lat\n\t\t\t\t\tlet D = child.props.position[1]; //lgt\n\n\t\t\t\t\t// A.lat should be the highest value\n\t\t\t\t\tA.lat = A.lat ? (A.lat > C ? A.lat : C) : C;\n\t\t\t\t\t// B.lat should be the lowest value\n\t\t\t\t\tB.lat = B.lat ? (B.lat < C ? B.lat : C) : C;\n\t\t\t\t\t// A.lgt should be the lowest value\n\t\t\t\t\tA.lgt = A.lgt ? (A.lgt < D ? A.lgt : D) : D;\n\t\t\t\t\t//B.lgt should be the higgest value\n\t\t\t\t\tB.lgt = B.lgt ? (B.lgt > D ? B.lgt : D) : D;\n\t\t\t\t}\n\t\t\t});\n\t\t\t//Create the Bounds Object\n\t\t\tsetBounds(L.latLngBounds(L.latLng(A.lat, A.lgt), L.latLng(B.lat, B.lgt)));\n\t\t} else {\n\t\t\tsetBounds(L.latLngBounds(L.latLng(30, -60), L.latLng(-30, 60)));\n\t\t}\n\t}, [children]);\n\n\tvar mapboxUrl =\n\t\t\"https://api.mapbox.com/styles/v1/mapbox/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\";\n\tvar accessToken =\n\t\t\"pk.eyJ1IjoiYnZpY3RvcmllbiIsImEiOiJja3RycWNhYmMwNGQ2MnVtaTNnMGNwMTJwIn0.HirDPOdiEpC0myYa1x45RA\";\n\tvar id = \"light-v9\";\n\n\tvar classicTiles =\n\t\t\"https://api.mapbox.com/styles/v1/mapbox/streets-v9/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYnZpY3RvcmllbiIsImEiOiJja3RycWNhYmMwNGQ2MnVtaTNnMGNwMTJwIn0.HirDPOdiEpC0myYa1x45RA\";\n\n\tvar MyTiles =\n\t\t\"https://api.mapbox.com/styles/v1/bvictorien/cl668wlli001515rvn4aobdou/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYnZpY3RvcmllbiIsImEiOiJja3RycWNhYmMwNGQ2MnVtaTNnMGNwMTJwIn0.HirDPOdiEpC0myYa1x45RA\";\n\n\tvar osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\n\treturn (\n\t\t<div\n\t\t\tclassName={css.Container}\n\t\t\tdata-fullscreen={keyboard}\n\t\t\tdata-update={to ? true : false}\n\t\t>\n\t\t\t{to && (\n\t\t\t\t<div className={css.Target}>\n\t\t\t\t\t<Target />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{center && (\n\t\t\t\t<MapContainer className={css.Map} keyboardPanDelta={0}>\n\t\t\t\t\t<TileLayer url={classicTiles} />\n\t\t\t\t\t{children}\n\t\t\t\t\t<Set bounds={bounds} ref={ref} to={to} keyboard={keyboard} />\n\t\t\t\t</MapContainer>\n\t\t\t)}\n\t\t\t<div className={css.Softkeys}>\n\t\t\t\t<div>Zoom out</div>\n\t\t\t\t<div>Select</div>\n\t\t\t\t<div>Zoom In</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}); /**/\n\n/* TRIGGER MAP UPDATE */\n\n/* MapContainer props are immutable: changing them after they have been set a first time will have no effect on the Map instance or its container. The Leaflet Map instance created by the MapContainer element can be accessed by child components using one of the provided hooks or the MapConsumer component. The component is use to triger re-render on the map */\n\nconst Set = React.forwardRef((props, ref) => {\n\tconst { bounds, to, keyboard } = props;\n\tconst map = useMap();\n\n\tif (ref) {\n\t\tref.current = map;\n\t}\n\n\t/* Here, we setup all keyboard actions*/\n\t//First, we define the incremental int from the keyboard\n\tconst i = 25;\n\t//Then, we define the onKeyDown function\n\tconst onKeyDown = (evt) => {\n\t\tif (evt.key === \"1\") {\n\t\t\tmap.zoomOut();\n\t\t} else if (evt.key === \"3\") {\n\t\t\tmap.zoomIn();\n\t\t}\n\t\tif (!keyboard) return false;\n\t\t//Events related to zoom\n\t\tif (evt.key === \"SoftLeft\") {\n\t\t\tmap.zoomOut();\n\t\t} else if (evt.key === \"SoftRight\") {\n\t\t\tmap.zoomIn();\n\t\t\t//Events related to zoom\n\t\t} else if (evt.key === \"ArrowUp\") {\n\t\t\tmap.panBy([0, -i], { animate: true });\n\t\t} else if (evt.key === \"ArrowDown\") {\n\t\t\tmap.panBy([0, i], { animate: true });\n\t\t} else if (evt.key === \"ArrowLeft\") {\n\t\t\tmap.panBy([-i, 0], { animate: true });\n\t\t} else if (evt.key === \"ArrowRight\") {\n\t\t\tmap.panBy([i, 0], { animate: true });\n\t\t\t//This last entry, trigger the onSubmit function and sent back the center of the map to the parent\n\t\t} else if (evt.key === \"Enter\") {\n\t\t\t//Go to display the results according to the coords\n\t\t\tif (to) {\n\t\t\t\tto({\n\t\t\t\t\tcoords: normalizeCoords(map.getCenter(), \"map\")\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tevt.preventDefault();\n\t};\n\t//Secondly,  We mount the onKeyDown when the app start\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"keydown\", onKeyDown);\n\t\treturn () => document.removeEventListener(\"keydown\", onKeyDown);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [keyboard]);\n\n\t// We adjust the bounds of the map. We can use fitBounds for no animation and flyToBounds for animation.\n\tuseEffect(() => {\n\t\tmap.fitBounds(bounds, {\n\t\t\t// I don't undertsand anything about the value of the padding.\n\t\t\tpadding: [24, 48]\n\t\t});\n\t}, [bounds, map]);\n\n\tmap.invalidateSize();\n\n\t//Suppose to disa\n\t//map.keyboard.disable();\n\n\treturn null;\n});\n\n/* USEFULL LINKS, DATA AND API */\n\n/**\n * We could improve the first view of the map by zooming on the country of the users. To perform that without knowing his accurate location, we could use IP localisation API. We found three API for that:\n \n 1. ipinfo.io\n * https://ipinfo.io/blog/replacing-getcurrentposition\n\n 2. country.is + country coords\n * https://www.npmjs.com/package/react-ipgeolocation\n * https://developers.google.com/public-data/docs/canonical/countries_csv\n \n 3. Abstract API\n * https://www.abstractapi.com/guides/how-to-use-ip-geolocation-in-react\n \n */\n","export default __webpack_public_path__ + \"static/media/marker.ee8a36fa.svg\";","import React from \"react\";\nimport L from \"leaflet\";\nimport { Marker } from \"react-leaflet\";\nimport css from \"./Map.module.css\";\nimport img from \"./images/marker.svg\";\n\n/* MARKERS */\n\n/* We use a set of compoments to setup specificities for our two markers: Our Current Position and the Taxi ranks */\n\n// MyPosition: Display a blue dot on the user's position.\nexport function MyPosition(props) {\n\tconst { position } = props;\n\n\tconst settings = new L.divIcon({\n\t\ticonSize: new L.Point(15, 15),\n\t\tclassName: css.here\n\t});\n\n\tif (position) {\n\t\treturn <Marker position={position} icon={settings} />;\n\t} else {\n\t\treturn false;\n\t}\n} /**/\n\n// Taxi Rank : Display a marker where the station rank is.\nexport function Rank(props) {\n\tconst { position } = props;\n\n\tconst settings = new L.Icon({\n\t\ticonUrl: img,\n\t\ticonAnchor: null,\n\t\tpopupAnchor: null,\n\t\tshadowUrl: null,\n\t\tshadowSize: null,\n\t\tshadowAnchor: null,\n\t\ticonSize: new L.Point(24, 32)\n\t});\n\n\treturn <Marker position={position} icon={settings} />;\n} /**/\n","import React, { useEffect, useState } from \"react\";\nimport css from \"./Button.module.css\";\n\nexport const AdsButton = () => {\n\tconst [state, setState] = useState(\"ready\");\n\n\t//Setup the keyboard event\n\tfunction handleKeyDown(evt) {\n\t\tif (evt.key === \"2\") {\n\t\t\tif (typeof window.getKaiAd === \"function\") {\n\t\t\t\tsetState(\"loading\");\n\t\t\t\twindow.getKaiAd({\n\t\t\t\t\tpublisher: \"36a8e3ea-afd1-4d19-8fa1-7d01fa86afa5\",\n\t\t\t\t\tapp: \"Taxi\",\n\t\t\t\t\tonerror: (err) => console.error(\"Custom catch:\", err),\n\t\t\t\t\tonready: (ad) => {\n\t\t\t\t\t\t// Ad is ready to be displayed\n\t\t\t\t\t\t// calling 'display' will display the ad\n\t\t\t\t\t\tad.call(\"display\");\n\t\t\t\t\t\tsetState(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetState(\"error\");\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"keydown\", handleKeyDown);\n\n\t\tlet timeout = setTimeout(() => {\n\t\t\tsetState(null);\n\t\t}, 12000);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"keydown\", handleKeyDown);\n\t\t\tclearTimeout(timeout);\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tif (!state) return false;\n\n\treturn (\n\t\t<div className={css.button}>\n\t\t\t{state === \"loading\" ? (\n\t\t\t\t<>Loading…</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<span>2</span> Support us\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","export function getDistance(lon1, lat1, lon2, lat2) {\n\tvar R = 6371; // Radius of the earth in km\n\tvar dLat = deg2rad(lat2 - lat1); // deg2rad below\n\tvar dLon = deg2rad(lon2 - lon1);\n\tvar a =\n\t\tMath.sin(dLat / 2) * Math.sin(dLat / 2) +\n\t\tMath.cos(deg2rad(lat1)) *\n\t\t\tMath.cos(deg2rad(lat2)) *\n\t\t\tMath.sin(dLon / 2) *\n\t\t\tMath.sin(dLon / 2);\n\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\tvar d = R * c; // Distance in km\n\n\tif (d < 1) {\n\t\treturn Math.round(d * 1000) + \"m\";\n\t} else {\n\t\treturn Math.round(d) + \"km\";\n\t}\n}\n\nexport function deg2rad(deg) {\n\treturn deg * (Math.PI / 180);\n}\n","import React from \"react\";\nimport css from \"./Card.module.css\";\nimport { getDistance } from \"../../tools/geometry.js\";\n\nexport const Card = ({ data }) => {\n\tconst { action, ranks, index, coords } = data;\n\t/*\n\tvar dots =\n\t\tranks &&\n\t\tindex &&\n\t\tranks.map((e, i) => {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tkey={i}\n\t\t\t\t\tnav-index={i}\n\t\t\t\t\tnav-selectable=\"true\"\n\t\t\t\t\tnav-selected={i === index ? \"true\" : \"false\"}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t\t*/\n\n\tswitch (action) {\n\t\tcase \"Waiting Results\":\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<p>Searching available options around…</p>\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t\tcase \"View Any Result\":\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<p>We didn't find any taxi rank around.</p>\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t\tcase \"View Results\":\n\t\t\tlet item = ranks[index];\n\n\t\t\tif (item.type === \"phone\") {\n\t\t\t\treturn (\n\t\t\t\t\t<Wrapper>\n\t\t\t\t\t\t<Dots current={index} max={ranks.length} />\n\t\t\t\t\t\t<Phone>\n\t\t\t\t\t\t\t<span className={css.subheader}>{item.vicinity}</span>\n\t\t\t\t\t\t\t<h2>{item.name}</h2>\n\t\t\t\t\t\t</Phone>\n\t\t\t\t\t</Wrapper>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tlet dist = getDistance(coords[1], coords[0], item.lng, item.lat);\n\n\t\t\t\treturn (\n\t\t\t\t\t<Wrapper>\n\t\t\t\t\t\t<Dots current={index} max={ranks.length} />\n\t\t\t\t\t\t<Rank>\n\t\t\t\t\t\t\t<span className={css.subheader}>{dist}</span>\n\t\t\t\t\t\t\t<h2>{item.name}</h2>\n\t\t\t\t\t\t</Rank>\n\t\t\t\t\t</Wrapper>\n\t\t\t\t);\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<p>Looks like there was a problem. Restart the app.</p>\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t}\n};\n\nconst Dots = ({ current, max }) => {\n\tlet dots = [];\n\tfor (var i = 0; i < max; i++) {\n\t\tdots.push(\n\t\t\t<div\n\t\t\t\tkey={i}\n\t\t\t\tnav-index={i}\n\t\t\t\tnav-selectable=\"true\"\n\t\t\t\tnav-selected={i === current ? \"true\" : \"false\"}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <div className={css.pagging}>{dots}</div>;\n};\n\nconst Rank = ({ children }) => {\n\treturn <div className={css.rank}>{children}</div>;\n};\n\nconst Phone = ({ children }) => {\n\treturn <div className={css.service}>{children}</div>;\n};\n\nconst Wrapper = ({ children }) => {\n\treturn <div className={css.Card}>{children}</div>;\n};\n","export const openSettings = () => {\n\tif (typeof MozActivity === \"function\") {\n\t\t// eslint-disable-next-line\n\t\tlet activity = new MozActivity({\n\t\t\tname: \"configure\",\n\t\t\tdata: {\n\t\t\t\ttarget: \"device\",\n\t\t\t\tsection: \"appPermissions\"\n\t\t\t}\n\t\t});\n\t\tactivity.onsuccess = function () {\n\t\t\t//success\n\t\t};\n\t\tactivity.onerror = function () {\n\t\t\t//error\n\t\t};\n\t}\n};\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLocationDisabled(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20.94,11 C20.48,6.83 17.17,3.52 13,3.06 L13,2 C13,1.45 12.55,1 12,1 C11.45,1 11,1.45 11,2 L11,3.06 C6.83,3.52 3.52,6.83 3.06,11 L2,11 C1.45,11 1,11.45 1,12 C1,12.55 1.45,13 2,13 L3.06,13 C3.52,17.17 6.83,20.48 11,20.94 L11,22 C11,22.55 11.45,23 12,23 C12.55,23 13,22.55 13,22 L13,20.94 C17.17,20.48 20.48,17.17 20.94,13 L22,13 C22.55,13 23,12.55 23,12 C23,11.45 22.55,11 22,11 L20.94,11 Z M12,19 C8.13,19 5,15.87 5,12 C5,8.13 8.13,5 12,5 C15.87,5 19,8.13 19,12 C19,15.87 15.87,19 12,19 Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLocationDisabled);\nexport default __webpack_public_path__ + \"static/media/LocationDisabled.9c9d03a7.svg\";\nexport { ForwardRef as ReactComponent };","import amplitude from \"amplitude-js\";\nconst version = process.env.REACT_APP_V;\n\nexport const hit = (name, properties, id) => {\n\tif (!name) return false;\n\n\tif (process.env.NODE_ENV !== \"production\") {\n\t\tconsole.log(name, {\n\t\t\tversion: version,\n\t\t\t...properties\n\t\t});\n\t}\n\n\tif (id) {\n\t\tamplitude.getInstance().init(process.env.REACT_APP_STATS_APIKEY, id);\n\t} else {\n\t\tamplitude.getInstance().init(process.env.REACT_APP_STATS_APIKEY);\n\t}\n\n\tamplitude.getInstance().logEvent(name, {\n\t\tversion: version,\n\t\t...properties\n\t});\n};\n","import { useState, useEffect } from \"react\";\n\nexport const useNavigation = () => {\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"keydown\", onKeyDown);\n\t\tsetNavigation(0);\n\n\t\treturn () => document.removeEventListener(\"keydown\", onKeyDown);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tconst [current, setCurrent] = useState({ type: null, index: null });\n\n\tconst getAllElements = () => document.querySelectorAll(\"button\");\n\n\tconst getTheIndexOfTheSelectedElement = () => {\n\t\tconst element = document.querySelector(\":focus\");\n\t\treturn element ? parseInt(element.getAttribute(\"nav-index\")) : 0;\n\t};\n\n\tconst setNavigation = (index) =>\n\t\tselectElement(getAllElements()[index] || document.body);\n\n\tconst onKeyDown = (evt) => {\n\t\tif (evt.key !== \"ArrowUp\" && evt.key !== \"ArrowDown\" && evt.key !== \"Enter\")\n\t\t\treturn;\n\n\t\tconst allElements = getAllElements();\n\t\tconst currentIndex = getTheIndexOfTheSelectedElement();\n\n\t\tlet setIndex;\n\t\tswitch (evt.key) {\n\t\t\tcase \"ArrowDown\":\n\t\t\t\tconst goToFirstElement = currentIndex + 1 > allElements.length - 1;\n\t\t\t\tsetIndex = goToFirstElement ? 0 : currentIndex + 1;\n\t\t\t\treturn selectElement(allElements[setIndex] || allElements[0], setIndex);\n\t\t\tcase \"ArrowUp\":\n\t\t\t\tconst goToLastElement = currentIndex === 0;\n\t\t\t\tsetIndex = goToLastElement ? allElements.length - 1 : currentIndex - 1;\n\t\t\t\treturn selectElement(allElements[setIndex] || allElements[0], setIndex);\n\t\t\tcase \"Enter\":\n\t\t\t\tgetAllElements()[currentIndex].click();\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst selectElement = (selectElement, setIndex = 0) => {\n\t\tif (selectElement) {\n\t\t\t[].forEach.call(getAllElements(), (element, index) => {\n\t\t\t\tconst selectThisElement = element === selectElement;\n\t\t\t\telement.setAttribute(\"nav-index\", index);\n\t\t\t\tselectThisElement ? element.focus() : element.blur();\n\t\t\t});\n\t\t\tsetCurrent({ type: selectElement.tagName, index: setIndex });\n\t\t} else {\n\t\t\tsetNavigation(0);\n\t\t}\n\t};\n\n\treturn [current, setNavigation];\n};\n","import { useState, useEffect } from \"react\";\nimport { set, get } from \"idb-keyval\";\nimport { compare } from \"compare-versions\";\nimport { hit } from \"../tools\";\nimport { v4 as uuidv4 } from \"uuid\";\nconst version = process.env.REACT_APP_V;\n//import useAnalytics from \"./useAnalytics\";\n\nlet name = \"taxi.kaios.\" + process.env.NODE_ENV;\n\nexport const useStorage = () => {\n\tlet [datasets, setDatasets] = useState(false);\n\n\t//Patch until we develop a database migration.\n\t//We we will need to develop a fonction to migrate the database name from \"taxi\" to \"taxi.kaios.production\"\n\tif (process.env.NODE_ENV === \"production\") {\n\t\tname = \"taxi\";\n\t}\n\n\tuseEffect(() => {\n\t\tconsole.log(name);\n\t\tget(name)\n\t\t\t.then((data) => {\n\t\t\t\t//Depending on the browser, a successfull request could be an empty object {}. To be sure that's the first openning of the app. We will need to check if the object contain any data. We use the creation date and the version to make the difference between an opening, an update or an installation\n\t\t\t\tif (!data.createdAt) {\n\t\t\t\t\t//if we don't have a creation date, it's an installation\n\t\t\t\t\tinstall();\n\t\t\t\t} else if (compare(data.version, version, \"<\") || !data.version) {\n\t\t\t\t\t//if we have a lower version number or no version number, it's an update\n\t\t\t\t\tupdate(data);\n\t\t\t\t} else if (process.env.NODE_ENV !== \"production\") {\n\t\t\t\t\t//During the developement, we always update the datasets to be sure we always follow the latest Data Model. That's simplify our developer life and void bug.\n\t\t\t\t\tupdate(data);\n\t\t\t\t} else {\n\t\t\t\t\t//Otherwie, it's a simple opening. We sent back the datasets\n\t\t\t\t\topen(data);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\t//if it's fail, it's an installation,\n\t\t\t\tinstall();\n\t\t\t});\n\t}, []);\n\n\t//During an installation, we create the object from craft.\n\tconst install = () => {\n\t\t//The Datasets that we will store\n\t\tconst newDatasets = {\n\t\t\tversion: version,\n\t\t\tcreatedAt: Date.now(),\n\t\t\tid: uuidv4(),\n\t\t\tdatasets: {\n\t\t\t\t//Global resume of the situation\n\t\t\t\taction: \"Choose Location\",\n\t\t\t\t//Store User's position\n\t\t\t\tcoords: null,\n\t\t\t\t//Store data from Taxi API\n\t\t\t\tranks: null,\n\t\t\t\t//Store the index of ranks\n\t\t\t\tindex: 0\n\t\t\t}\n\t\t};\n\t\t//We store offline the Datasets through the set function\n\t\tset(name, newDatasets)\n\t\t\t.then(() => {\n\t\t\t\t//Successfull installation\n\t\t\t\t//We sent back the datasets to the app\n\t\t\t\tsetDatasets(newDatasets.datasets);\n\t\t\t\t//We push an event for analytics\n\t\t\t\thit(\"Install App\", null, newDatasets.id);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\t//Unsuccessfull installation\n\t\t\t});\n\t};\n\n\t//During an update, we push the previous data in the template except for the app version. This way, we have a new version number. Moreover, we clean the datasets: we remove unecessary data and update to the new data model.\n\tconst update = (data) => {\n\t\t//The Datasets that we will store\n\t\tconst newDatasets = {\n\t\t\tversion: version,\n\t\t\tcreatedAt: data.createdAt ? data.createdAt : Date.now(),\n\t\t\tid: data.id ? data.id : uuidv4(),\n\t\t\tdatasets: {\n\t\t\t\t//Global resume of the situation\n\t\t\t\taction: data.datasets.action ? data.datasets.action : \"Choose Location\",\n\t\t\t\t//Store User's position\n\t\t\t\tcoords: data.datasets.coords ? data.datasets.coords : null,\n\t\t\t\t//Store data from Taxi API\n\t\t\t\tranks: data.datasets.ranks ? data.datasets.ranks : null,\n\t\t\t\t//Store the index of ranks\n\t\t\t\tindex: data.datasets.index ? data.datasets.index : 0\n\t\t\t}\n\t\t};\n\n\t\tset(name, newDatasets)\n\t\t\t.then(() => {\n\t\t\t\t//Successfull installation\n\t\t\t\tsetDatasets(newDatasets.datasets);\n\t\t\t\thit(\"Open App\", { type: \"update\" }, newDatasets.id);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\t//Unsuccessfull installation\n\t\t\t});\n\t};\n\n\t// We open the app without performing any change on the offline data. Moreover, we push an event for the records.\n\tconst open = (data) => {\n\t\thit(\"Open App\", {}, data.id);\n\t\tsetDatasets(data.datasets);\n\t};\n\n\t//The App have access only to the data and not the metadata (version and the creation date). We use the updateDatasets to update the data outside of the hooks\n\tconst updateDatasets = (datasets) => {\n\t\tget(name).then((metadata) => {\n\t\t\tconst newData = {\n\t\t\t\t...metadata,\n\t\t\t\tdatasets: {\n\t\t\t\t\t//We keep previous data to avoid data deletion by mistake\n\t\t\t\t\t...metadata.datasets,\n\t\t\t\t\t//We replace the values if we have some\n\t\t\t\t\t...datasets\n\t\t\t\t}\n\t\t\t};\n\t\t\t//We updating the database\n\t\t\tset(name, newData);\n\t\t\t//We sent back the datasets\n\t\t\tsetDatasets(newData.datasets);\n\t\t});\n\t};\n\n\treturn [datasets, updateDatasets];\n};\n\n/*DEV FUNCTIONS*/\n//The function below is just use for devellopement purpose to re-install the datasets or look into it during devellopement\n\nwindow.dev = {\n\t//Clear the database to perform a installation\n\tclear: () => {\n\t\tset(name, {});\n\t\tdocument.location.reload();\n\t},\n\tget: () => {\n\t\tget(name).then((data) => {\n\t\t\tconsole.log(data);\n\t\t});\n\t}\n};\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSign(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 153,\n    height: 99,\n    viewBox: \"0 0 153 99\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#F1F3F5\",\n    d: \"M98,0 C104.627417,-5.32740867e-15 110,5.372583 110,12 L110,23 L141,23 C147.627417,23 153,28.372583 153,35 C153,41.627417 147.627417,47 141,47 L121.317205,47.0000801 C121.759393,48.2511731 122,49.5974882 122,51 C122,57.627417 116.627417,63 110,63 L12,63 C5.372583,63 8.11624501e-16,57.627417 0,51 C-8.11624501e-16,44.372583 5.372583,39 12,39 L27.6831465,39.0009157 C27.2407343,37.7495413 27,36.4028839 27,35 C27,28.372583 32.372583,23 39,23 L44,23 L44,12 C44,5.372583 49.372583,2.99379359e-15 56,0 L98,0 Z\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(54.934 10.352)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 35,\n    height: 7,\n    x: 4,\n    y: 81,\n    fill: \"#000\",\n    fillOpacity: 0.05,\n    rx: 3.5\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#B2B2B2\",\n    d: \"M17,42 L25,42 L25,83.5833333 C25,84.3657367 24.3657367,85 23.5833333,85 L18.4166667,85 C17.6342633,85 17,84.3657367 17,83.5833333 L17,42 L17,42 Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#FFC208\",\n    d: \"M9.07905815,-1.00819071e-05 L32.913139,0.0326125199 C37.9108261,0.039453042 41.9605468,4.08917374 41.9673873,9.08686082 L42.0000099,32.920942 C42.0068637,37.9283191 37.9531386,41.9931563 32.9457616,42.0000101 C32.9374884,42.0000214 32.9292151,42.0000214 32.9209418,42.0000101 L9.086861,41.9673875 C4.08917393,41.960547 0.0394532273,37.9108263 0.0326127054,32.9131392 L-9.89637736e-06,9.07905797 C-0.00686368132,4.07168093 4.04686136,0.00684370304 9.0542384,-1.00819074e-05 C9.06251165,-2.14058105e-05 9.07078491,-2.14058104e-05 9.07905815,-1.00819071e-05 Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    fill: \"#FFF\",\n    fillRule: \"nonzero\",\n    points: \"30.648 11.352 30.648 17.027 23.838 17.027 23.838 31.783 18.162 31.783 18.162 17.027 11.352 17.027 11.352 11.352\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSign);\nexport default __webpack_public_path__ + \"static/media/sign.98010a07.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport css from \"./Onboarding.module.scss\";\nimport { ReactComponent as Disabled } from \"./LocationDisabled.svg\";\n\n/* MARKERS */\n\n/* We use a set of compoments to setup specificities for our two markers: Our Current Position and the Taxi ranks */\n\n// MyPosition: Display a blue dot on the user's position.\nexport function GetPositionButton(props) {\n\treturn (\n\t\t<div className={css.GetPositionButton}>\n\t\t\t<Disabled />\n\t\t</div>\n\t);\n} /**/\n","import React, { useEffect, useState } from \"react\";\nimport css from \"./Onboarding.module.scss\";\nimport { GetPositionButton } from \"./GetPositionButton\";\n\n/* MARKERS */\n\n/* We use a set of compoments to setup specificities for our two markers: Our Current Position and the Taxi ranks */\n\n// MyPosition: Display a blue dot on the user's position.\nexport function Earth(props) {\n\treturn (\n\t\t<div className={css.SolarSystem}>\n\t\t\t<div data-flag=\"flag\"></div>\n\t\t\t<GetPositionButton />\n\t\t</div>\n\t);\n} /**/\n","import React from \"react\";\nimport css from \"./Onboarding.module.scss\";\nimport { getCurrentPosition, normalizeCoords, openSettings } from \"../../tools\";\nimport { useNavigation } from \"../../hooks\";\nimport { Earth } from \"./Earth\";\nimport { ReactComponent as Sign } from \"./sign.svg\";\n\nexport function Onboarding(props) {\n\tconst { data, to } = props;\n\n\t/* ARROW NAVIGATION */\n\t// Will be used to store the index of the selected result\n\tuseNavigation();\n\n\t/**\n\t * STATE MANAGEMENT\n\t * We have four states : Initial, Loading, Denied and Error\n\t */\n\n\tswitch (data.action) {\n\t\tcase \"Learn Basics\":\n\t\t\treturn (\n\t\t\t\t<div className={css.onboarding}>\n\t\t\t\t\t<div className={css.SolarSystem}>\n\t\t\t\t\t\t<Sign />\n\t\t\t\t\t</div>\n\t\t\t\t\t<p>Find easily taxi stand around.</p>\n\t\t\t\t\t<button onClick={() => to(\"Choose Location\")}>Continue</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\tcase \"Choose Location\":\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<p>Where do you want to find taxis?</p>\n\t\t\t\t\t<button onClick={() => to(\"Waiting Location\")}>Near Me</button>\n\t\t\t\t\t<button onClick={() => to(\"Choose On Map\")}>Choose On Map</button>\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t\tcase \"Waiting Location\":\n\t\t\tgetCurrentPosition(\n\t\t\t\t(res) => {\n\t\t\t\t\tto({\n\t\t\t\t\t\taction: \"Got Location\",\n\t\t\t\t\t\tcoords: normalizeCoords(res.coords, \"GPS\")\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t() => to(\"Handle Denied Location\"),\n\t\t\t\t() => to(\"Handle Location Error\")\n\t\t\t);\n\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<p>Searching the stars for your location…</p>\n\t\t\t\t\t<button disabled>Near Me</button>\n\t\t\t\t\t<button disabled>Choose On Map</button>\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t\tcase \"Got Location\":\n\t\t\tsetTimeout(() => {\n\t\t\t\tto(\"Waiting Results\");\n\t\t\t}, 1000);\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<p>We found you.</p>\n\t\t\t\t\t<button disabled>Near Me</button>\n\t\t\t\t\t<button disabled>Choose On Map</button>\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t\tcase \"Handle Denied Location\":\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tYou denied the geolocation permission. If you want share your\n\t\t\t\t\t\tlocation, grant access through the settings.\n\t\t\t\t\t</p>\n\t\t\t\t\t<button onClick={openSettings}>Settings</button>\n\t\t\t\t\t<button onClick={() => to(\"Choose On Map\")}>Choose On Map</button>\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t\tcase \"Handle Location Error\":\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<p>We didn't success to retrieve your location.</p>\n\t\t\t\t\t<button onClick={() => to(\"Choose On Map\")}>Choose On Map</button>\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t\tdefault:\n\t\t\tbreak;\n\t}\n}\n\nconst Wrapper = ({ children, props }) => {\n\treturn (\n\t\t<div className={css.onboarding}>\n\t\t\t<Earth />\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import React from \"react\";\nimport { useEffect } from \"react\";\nimport {\n\tSoftkey,\n\tMap,\n\tMyPosition,\n\tRank,\n\tAdsButton,\n\tCard\n} from \"../../components\";\n\nimport { fetch } from \"../../tools\";\n\nexport function Results({ data, to }) {\n\tlet { coords, action, ranks, index } = data;\n\n\t/* LISTENER FOR KEY EVENT */\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"keydown\", onKeyDown);\n\n\t\treturn () => document.removeEventListener(\"keydown\", onKeyDown);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [data]);\n\n\tconst onKeyDown = (evt) => {\n\t\tif (evt.key === \"ArrowLeft\" && action !== \"Display Map\") {\n\t\t\tlet i = index - 1 < 0 ? 0 : index - 1;\n\t\t\tto({ index: i });\n\t\t} else if (evt.key === \"ArrowRight\" && action !== \"Display Map\") {\n\t\t\tlet max = ranks.length - 1;\n\t\t\tlet i = index + 1 > max ? max : index + 1;\n\t\t\tto({ index: i });\n\t\t} else if (evt.key === \"Backspace\" && action === \"Display Map\") {\n\t\t\tto(\"View Results\");\n\t\t} else if (evt.key === \"Backspace\" && action !== \"Display Map\") {\n\t\t\tto(\"Choose Location\");\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tevt.preventDefault();\n\t};\n\t/**/\n\n\t//Feetch Data if the coords change\n\tuseEffect(() => {\n\t\t//Stop the update in case that we have already offline datas.\n\n\t\tif (action === \"Waiting Results\") {\n\t\t\tfetch(\n\t\t\t\tcoords,\n\t\t\t\tfunction (result) {\n\t\t\t\t\tto({ ranks: result });\n\t\t\t\t},\n\t\t\t\tfunction (error) {\n\t\t\t\t\t//How to Handle error?\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [action]);\n\n\t/* DEFINE SOFKEYS EVENT */\n\t// We define actions depending on app stat\n\t// !!To Improve: We use a switch, but so case are similar. Usinf IFs should be more efficent\n\n\tconst softactions = () => {\n\t\tif (action === \"View Results\" || action === \"Call Taxi Service\") {\n\t\t\tlet phone = ranks && (index || index === 0) && ranks[index].phone;\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tname: phone ? \"Call\" : \"\",\n\t\t\t\t\tfct: phone\n\t\t\t\t\t\t? () => {\n\t\t\t\t\t\t\t\tto(\"Call Taxi Service\");\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Map\",\n\t\t\t\t\tfct: () => {\n\t\t\t\t\t\tto(\"Display Map\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t} else if (action === \"View Any Result\") {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tname: \"Change Position\",\n\t\t\t\t\tfct: () => to(\"Choose Location\")\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t};\n\t/**/\n\n\t//Will desactivate ads and card when the map will show up\n\tlet isMap = action === \"Display Map\" ? true : false;\n\tlet isRanks = ranks && ranks.length > 0 ? true : false;\n\n\treturn (\n\t\t<>\n\t\t\t<Map center={coords} keyboard={isMap}>\n\t\t\t\t{coords && <MyPosition position={coords} />}\n\t\t\t\t{isRanks && ranks[index].type !== \"phone\" && (\n\t\t\t\t\t<Rank position={[ranks[index].lat, ranks[index].lng]} />\n\t\t\t\t)}\n\t\t\t</Map>\n\t\t\t{!isMap && (\n\t\t\t\t<>\n\t\t\t\t\t<AdsButton />\n\t\t\t\t\t<Card data={data}></Card>\n\t\t\t\t\t<Softkey>{softactions()}</Softkey>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","const version = process.env.REACT_APP_V;\n\nexport function fetch(coords, onCompleted, onError) {\n\tif (!coords) return false;\n\t//Let's put together all pieces of the request\n\t//We start with the domain name. It could the one from production or devellopements\n\tlet src = process.env.REACT_APP_API;\n\t//We add the latitude and longtitude. Essential piece of the request to get the ranks nearby to these coordinates\n\tsrc += \"?lat=\" + coords[0];\n\tsrc += \"&lng=\" + coords[1];\n\t//We add the version in case of specific version need different data format\n\tsrc += \"&version=\" + version;\n\n\twindow\n\t\t.fetch(src)\n\t\t.then((res) => res.json())\n\t\t.then(\n\t\t\t(request) => {\n\t\t\t\tif (request.results != null) {\n\t\t\t\t\t//If we got results, we sent back the result\n\t\t\t\t\t//We update the view\n\t\t\t\t\tif (typeof onCompleted === \"function\") onCompleted(request.results);\n\t\t\t\t} else {\n\t\t\t\t\t//if the request is a success, but we don't have a result, we sent back an empty array\n\t\t\t\t\tif (typeof onCompleted === \"function\") onCompleted(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\t// if the request is a fail, we sent back the error object\n\t\t\t\tif (typeof onError === \"function\") onError(error);\n\t\t\t}\n\t\t);\n}\n","var _path, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIconReviewPositiveAnswer(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 48,\n    height: 48,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 45.1 39.5 L 45.1 7.55 C 45.1 6.317 44.65 5.242 43.75 4.325 C 42.85 3.408 41.783 2.95 40.55 2.95 L 7.55 2.95 C 6.317 2.95 5.242 3.408 4.325 4.325 C 3.408 5.242 2.95 6.317 2.95 7.55 L 2.95 32.6 C 2.95 33.833 3.408 34.9 4.325 35.8 C 5.242 36.7 6.317 37.15 7.55 37.15 L 37.25 37.15 L 41.2 41.1 C 42 41.9 42.85 42.1 43.75 41.7 C 44.65 41.3 45.1 40.567 45.1 39.5 Z\",\n    fill: \"rgb(0, 194, 74)\"\n  })), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(17 15)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 0 5 L 5 10\",\n    fill: \"transparent\",\n    strokeWidth: 5,\n    stroke: \"hsl(0, 0%, 100%)\",\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 15 0 L 5 10\",\n    fill: \"transparent\",\n    strokeWidth: 5,\n    stroke: \"hsl(0, 0%, 100%)\",\n    strokeLinecap: \"round\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconReviewPositiveAnswer);\nexport default __webpack_public_path__ + \"static/media/icon-review-positive-answer.2e2e654f.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect } from \"react\";\nimport css from \"./Call.module.scss\";\n\nexport function Graphic(props) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\">\n\t\t\t<path\n\t\t\t\td=\"M 0 16 C 0 7.163 7.163 0 16 0 L 48 0 C 56.837 0 64 7.163 64 16 L 64 48 C 64 56.837 56.837 64 48 64 L 16 64 C 7.163 64 0 56.837 0 48 Z\"\n\t\t\t\tfill=\"rgb(0, 194, 74)\"\n\t\t\t></path>\n\t\t\t<path\n\t\t\t\td=\"M 49.3 30.1 C 48.833 30.1 48.442 29.958 48.125 29.675 C 47.808 29.392 47.617 29 47.55 28.5 C 47.117 25.133 45.692 22.25 43.275 19.85 C 40.858 17.45 37.983 16 34.65 15.5 C 34.15 15.5 33.758 15.317 33.475 14.95 C 33.192 14.583 33.05 14.167 33.05 13.7 C 33.05 13.2 33.225 12.792 33.575 12.475 C 33.925 12.158 34.333 12.033 34.8 12.1 C 39 12.633 42.608 14.425 45.625 17.475 C 48.642 20.525 50.45 24.15 51.05 28.35 C 51.083 28.817 50.933 29.225 50.6 29.575 C 50.267 29.925 49.833 30.1 49.3 30.1 Z\"\n\t\t\t\tfill=\"rgb(255, 255, 255)\"\n\t\t\t></path>\n\t\t\t<path\n\t\t\t\td=\"M 40.1 30.1 C 39.767 30.1 39.425 29.967 39.075 29.7 C 38.725 29.433 38.483 29.1 38.35 28.7 C 38.05 27.833 37.542 27.033 36.825 26.3 C 36.108 25.567 35.317 25.05 34.45 24.75 C 34.017 24.583 33.675 24.35 33.425 24.05 C 33.175 23.75 33.05 23.4 33.05 23 C 33.05 22.4 33.25 21.942 33.65 21.625 C 34.05 21.308 34.5 21.217 35 21.35 C 36.6 21.85 38.008 22.692 39.225 23.875 C 40.442 25.058 41.3 26.467 41.8 28.1 C 41.933 28.567 41.825 29.017 41.475 29.45 C 41.125 29.883 40.667 30.1 40.1 30.1 Z\"\n\t\t\t\tfill=\"rgb(255, 255, 255)\"\n\t\t\t></path>\n\t\t\t<path\n\t\t\t\td=\"M 47.35 50.95 C 43.217 50.95 39.075 49.925 34.925 47.875 C 30.775 45.825 27.067 43.167 23.8 39.9 C 20.533 36.633 17.883 32.917 15.85 28.75 C 13.817 24.583 12.8 20.45 12.8 16.35 C 12.8 15.417 13.125 14.608 13.775 13.925 C 14.425 13.242 15.25 12.9 16.25 12.9 L 22.9 12.9 C 23.967 12.9 24.842 13.167 25.525 13.7 C 26.208 14.233 26.65 15.017 26.85 16.05 L 28.1 21.35 C 28.233 22.283 28.208 23.075 28.025 23.725 C 27.842 24.375 27.483 24.933 26.95 25.4 L 21.8 30.1 C 23.467 32.733 25.283 35.008 27.25 36.925 C 29.217 38.842 31.383 40.483 33.75 41.85 L 38.75 36.9 C 39.317 36.3 39.95 35.883 40.65 35.65 C 41.35 35.417 42.133 35.4 43 35.6 L 47.7 36.75 C 48.733 37.017 49.517 37.492 50.05 38.175 C 50.583 38.858 50.85 39.7 50.85 40.7 L 50.85 47.45 C 50.85 48.45 50.508 49.283 49.825 49.95 C 49.142 50.617 48.317 50.95 47.35 50.95 Z\"\n\t\t\t\tfill=\"rgb(255, 255, 255)\"\n\t\t\t></path>\n\t\t</svg>\n\t);\n}\n","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIconReviewNegativeAnswer(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 48,\n    height: 48,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 45.1 39.5 L 45.1 7.55 C 45.1 6.317 44.65 5.242 43.75 4.325 C 42.85 3.408 41.783 2.95 40.55 2.95 L 7.55 2.95 C 6.317 2.95 5.242 3.408 4.325 4.325 C 3.408 5.242 2.95 6.317 2.95 7.55 L 2.95 32.6 C 2.95 33.833 3.408 34.9 4.325 35.8 C 5.242 36.7 6.317 37.15 7.55 37.15 L 37.25 37.15 L 41.2 41.1 C 42 41.9 42.85 42.1 43.75 41.7 C 44.65 41.3 45.1 40.567 45.1 39.5 Z\",\n    fill: \"rgb(230, 28, 99)\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 29 15 L 19 25\",\n    fill: \"transparent\",\n    strokeWidth: 5,\n    stroke: \"hsl(0, 0%, 100%)\",\n    strokeLinecap: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 19 15 L 29 25\",\n    fill: \"transparent\",\n    strokeWidth: 5,\n    stroke: \"hsl(0, 0%, 100%)\",\n    strokeLinecap: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconReviewNegativeAnswer);\nexport default __webpack_public_path__ + \"static/media/icon-review-negative-answer.7a05330e.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIconReviewQuestion(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 48,\n    height: 48,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 22.95 26.65 C 23.117 27.117 23.467 27.35 24 27.35 C 24.533 27.35 24.9 27.117 25.1 26.65 L 26.75 22.85 L 30.6 21.15 C 31 20.983 31.2 20.633 31.2 20.1 C 31.2 19.567 31 19.2 30.6 19 L 26.75 17.35 L 25.1 13.5 C 24.9 13.067 24.533 12.85 24 12.85 C 23.467 12.85 23.117 13.067 22.95 13.5 L 21.25 17.35 L 17.45 19 C 17.017 19.2 16.8 19.567 16.8 20.1 C 16.8 20.633 17.017 20.983 17.45 21.15 L 21.25 22.85 Z M 2.95 39.5 L 2.95 7.55 C 2.95 6.317 3.4 5.242 4.3 4.325 C 5.2 3.408 6.267 2.95 7.5 2.95 L 40.5 2.95 C 41.733 2.95 42.808 3.408 43.725 4.325 C 44.642 5.242 45.1 6.317 45.1 7.55 L 45.1 32.6 C 45.1 33.833 44.642 34.9 43.725 35.8 C 42.808 36.7 41.733 37.15 40.5 37.15 L 10.8 37.15 L 6.85 41.1 C 6.05 41.9 5.2 42.1 4.3 41.7 C 3.4 41.3 2.95 40.567 2.95 39.5 Z\",\n    fill: \"rgb(0, 113, 222)\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconReviewQuestion);\nexport default __webpack_public_path__ + \"static/media/icon-review-question.d2b3009d.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect } from \"react\";\nimport css from \"./Call.module.scss\";\nimport { Button } from \"../../components\";\nimport { useNavigation } from \"../../hooks\";\nimport { Graphic } from \"./icon-calling.js\";\nimport { ReactComponent as IconPositiveAnswer } from \"./icon-review-positive-answer.svg\";\nimport { ReactComponent as IconNegativeAnswer } from \"./icon-review-negative-answer.svg\";\nimport { ReactComponent as IconQuestion } from \"./icon-review-question.svg\";\nimport { Softkey } from \"../../components\";\n\nexport function Call(props) {\n\tlet { data, to } = props;\n\tlet { action, ranks, index } = data;\n\tlet phone = data.ranks[data.index].phone;\n\n\tuseNavigation();\n\n\tconst onKeyDown = (evt) => {\n\t\tif (evt.key === \"Backspace\") {\n\t\t\tto(\"View Results\");\n\t\t\tevt.preventDefault();\n\t\t}\n\t};\n\n\tconst close = () => {\n\t\tto(\"View Results\");\n\t};\n\n\tconst satisfy = () => {\n\t\tto(\"Satisfy With Taxi Service\");\n\t};\n\n\tconst unsatisfy = () => {\n\t\tto(\"Unsatisfy With Taxi Service\");\n\t};\n\n\t/* LISTENER FOR KEY EVENT */\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"keydown\", onKeyDown);\n\n\t\treturn () => document.removeEventListener(\"keydown\", onKeyDown);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [data]);\n\n\tuseEffect(() => {}, []);\n\n\tswitch (action) {\n\t\tcase \"Call Taxi Service\":\n\t\t\t//Display Call Prompt\n\t\t\tsetTimeout(() => {\n\t\t\t\twindow.location = \"tel:\" + phone;\n\t\t\t}, 500);\n\t\t\t//Go to the Feedback Prompt\n\t\t\tsetTimeout(() => {\n\t\t\t\tto(\"Review Taxi Service\");\n\t\t\t}, 1650);\n\t\t\treturn (\n\t\t\t\t<div className={css.main}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Graphic />\n\t\t\t\t\t\t<p>Preparing Call…</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\tcase \"Review Taxi Service\":\n\t\t\treturn (\n\t\t\t\t<div className={css.main}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<IconQuestion />\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tAre you satisfy with your call with <b>{ranks[index].name}</b>?\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Softkey>\n\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t{ name: \"Yes\", fct: satisfy },\n\t\t\t\t\t\t\t{ name: \"Skip\", fct: close },\n\t\t\t\t\t\t\t{ name: \"No\", fct: unsatisfy }\n\t\t\t\t\t\t]}\n\t\t\t\t\t</Softkey>\n\t\t\t\t</div>\n\t\t\t);\n\t\tcase \"Satisfy With Taxi Service\":\n\t\t\treturn (\n\t\t\t\t<div className={css.main}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<IconPositiveAnswer />\n\t\t\t\t\t\t<h1>Thanks for your feedback</h1>\n\t\t\t\t\t\t<p>It will help us to improve our application</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Softkey>{[{ name: \"Close\", fct: close }]}</Softkey>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\tcase \"Unsatisfy With Taxi Service\":\n\t\t\treturn (\n\t\t\t\t<div className={css.main}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<IconNegativeAnswer />\n\t\t\t\t\t\t<h1>Sorry to hear that</h1>\n\t\t\t\t\t\t<p>Your feedback will help us to improve that</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Softkey>{[{ name: \"Close\", fct: close }]}</Softkey>\n\t\t\t\t</div>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n","import React from \"react\";\nimport { Onboarding, Map, Results, Call } from \"./components\";\nimport { useEffect } from \"react\";\nimport { useStorage, usePrevious } from \"./hooks\";\nimport { hit } from \"./tools\";\n\nexport default function App() {\n\t/*** Use Storage is an offline database ***/\n\t// Once we trigger it, the function will fecth the data available on the device. During the process, the function will figure out if it's an app openning, an update or installation\n\tlet [data, update] = useStorage();\n\tlet previousData = usePrevious(data);\n\n\t/*** Analytics ***/\n\t//All analytics is trigger from here except for openning, installation and update which is trigger in the useStorage hook.\n\t//We look into the previous state of data to not track twice an event and avoid back navigation tracking\n\tuseEffect(() => {\n\t\tlet { action, ranks, index, coords } = data;\n\t\tlet a = action;\n\t\tlet b = previousData && previousData.action;\n\t\tlet properties = {};\n\n\t\t//avoid double event and back navigation tracking\n\t\tif (a === b) return false;\n\t\tif (a === \"View Results\") {\n\t\t\tif (\n\t\t\t\tb === \"Display Map\" ||\n\t\t\t\tb === \"Review Taxi Service\" ||\n\t\t\t\tb === \"Satisfy With Taxi Service\" ||\n\t\t\t\tb === \"Unsatisfy With Taxi Service\"\n\t\t\t)\n\t\t\t\treturn false;\n\t\t}\n\n\t\t//configure properties based on the event\n\t\tif (\n\t\t\ta === \"Call Taxi Service\" ||\n\t\t\ta === \"Satisfy With Taxi Service\" ||\n\t\t\ta === \"Unsatisfy With Taxi Service\"\n\t\t)\n\t\t\tproperties = {\n\t\t\t\tphone: ranks[index].phone,\n\t\t\t\tname: ranks[index].name\n\t\t\t};\n\n\t\tif (a === \"View Results\" || a === \"View Any Results\")\n\t\t\tproperties = {\n\t\t\t\tquantity: ranks ? ranks.length : 0,\n\t\t\t\tlatitude: coords.lat,\n\t\t\t\tlongitude: coords.lng\n\t\t\t};\n\n\t\thit(a, properties);\n\t}, [data, previousData]);\n\n\t/*** State Manager ***/\n\t// The \"to\" function handle the states management. Triggered by the compomeents, \"to\" apply the correct data (e.g. : reseting coords) and redirect to the corresponding view according to the action.\n\n\tconst to = (input) => {\n\t\tlet output;\n\t\tlet { coords, ranks, action } = input;\n\n\t\t//Most of the time, the input it's just a string with the state where to go. However, sometime we receive an object to push into the datatsets\n\t\tif (typeof input === \"string\") {\n\t\t\t//We have only a string, it's an action (state)\n\t\t\toutput = { action: input };\n\t\t} else {\n\t\t\t//It's object, we push the input into the datasets. However, somes rules apply to avoid bugs and crashs.\n\n\t\t\t//If we reset the coord or the ranks. We reset the index too. Otherwise, it could target a childrien which doesn't exist.\n\t\t\tif (ranks || coords) {\n\t\t\t\tinput.index = 0;\n\t\t\t\t//If we have only coords, we reset the ranks which was associated to the previous coords.\n\t\t\t\tinput.ranks = ranks ? ranks : null;\n\t\t\t}\n\n\t\t\t//If we don't have \"action\", we guess it according to the input\n\t\t\tif (!action && coords) {\n\t\t\t\t//New coords, we need to wait for the results again.\n\t\t\t\tinput.action = \"Waiting Results\";\n\t\t\t} else if (!action && ranks) {\n\t\t\t\t//New results, we need to display it\n\t\t\t\tinput.action = ranks.length === 0 ? \"View Any Result\" : \"View Results\";\n\t\t\t}\n\n\t\t\t//Once we applied the rules, the ouput is ready.\n\t\t\toutput = input;\n\t\t}\n\n\t\t//We update the datasets\n\t\tupdate({ ...data, ...output });\n\t};\n\n\t/*** Render ***/\n\t//What view to render is written in the offline datasets as target. We apply strickly the rules here\n\n\t//A path to display Results when we have \"Call Taxi Service\" stored as action\n\t/*\n\tif (data.action === \"Call Taxi Service\") {\n\t\tdata.action = data.ranks.length === 0 ? \"View Any Result\" : \"View Results\";\n\t\thit(\"Call Taxi Service\", {\n\t\t\tphone: data.ranks[data.index].phone,\n\t\t\tname: data.ranks[data.index].name\n\t\t});\n\t}/**/\n\n\tif (!data) {\n\t\treturn <div></div>;\n\t} else if (\n\t\tdata.action === \"Learn Basics\" ||\n\t\tdata.action === \"Choose Location\" ||\n\t\tdata.action === \"Waiting Location\" ||\n\t\tdata.action === \"Got Location\" ||\n\t\tdata.action === \"Handle Denied Location\" ||\n\t\tdata.action === \"Handle Location Error\"\n\t) {\n\t\treturn <Onboarding data={data} to={to} />;\n\t} else if (data.action === \"Choose On Map\") {\n\t\treturn <Map to={to} />;\n\t} else if (\n\t\tdata.action === \"Waiting Results\" ||\n\t\tdata.action === \"View Results\" ||\n\t\tdata.action === \"View Any Result\" ||\n\t\tdata.action === \"Display Map\"\n\t) {\n\t\treturn <Results data={data} to={to} />;\n\t} else if (\n\t\tdata.action === \"Call Taxi Service\" ||\n\t\tdata.action === \"Review Taxi Service\" ||\n\t\tdata.action === \"Unsatisfy With Taxi Service\" ||\n\t\tdata.action === \"Satisfy With Taxi Service\"\n\t) {\n\t\treturn <Call data={data} to={to} hit={hit} />;\n\t} else {\n\t\treturn <div>There is an error.</div>;\n\t}\n}\n","import { useEffect, useRef } from \"react\";\n\n// Hook\nexport function usePrevious(value) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef();\n\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"onboarding\":\"Onboarding_onboarding__25WWR\",\"SolarSystem\":\"Onboarding_SolarSystem__1DyXE\",\"worldtour\":\"Onboarding_worldtour__3aBHe\",\"GetPositionButton\":\"Onboarding_GetPositionButton__2luV2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Map_Container__1atR2\",\"Softkeys\":\"Map_Softkeys__-9J-q\",\"Target\":\"Map_Target__1Mo6V\",\"Map\":\"Map_Map__lBUCh\",\"here\":\"Map_here__17bxm\",\"here-pulse\":\"Map_here-pulse__1ZD6n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"Card_Card__2v91Y\",\"subheader\":\"Card_subheader__1vgJ1\",\"rank\":\"Card_rank__dk7EH\",\"service\":\"Card_service__2l9mL\",\"pagging\":\"Card_pagging__sijv9\"};"],"sourceRoot":""}